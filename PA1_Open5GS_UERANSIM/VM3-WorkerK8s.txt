sudo nano /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg				
network: {config: disabled}				
sudo touch /etc/cloud/cloud-init.disabled				
				
sudo nano /etc/hosts				
192.168.50.11   Open5GS				
192.168.50.12   MasterK8s				
192.168.50.13   WorkerK8s				
192.168.50.14   UE				
				
sudo hostnamectl set-hostname WorkerK8s				
				
sudo nano /etc/netplan/50-cloud-init.yaml				
eth1:				
            dhcp4: no				
            dhcp6: no				
            addresses:				
              - 192.168.50.12/24				
            match:				
                macaddress: 7c:7f:37:04:37:99				
            set-name: eth1				
				
				
BÆ°á»›c 1 â€“ CÃ i Kubernetes (VM2 = Master, VM3 = Worker)				
ChÃºng ta chia bÆ°á»›c nÃ y thÃ nh 4 viá»‡c:				
1	CÃ i containerd trÃªn cáº£ VM2 & VM3			
2	CÃ i kubeadm, kubelet, kubectl trÃªn cáº£ hai VM			
3	Init Kubernetes trÃªn MasterK8s (VM2)			
4	Join WorkerK8s (VM3) vÃ o cluster			
MÃ¬nh báº¯t Ä‘áº§u Viá»‡c 1.				
ğŸ§© Viá»‡c 1 â€“ CÃ i containerd (runtime) trÃªn VM2 & VM3				
Kubernetes cáº§n container runtime. ChÃºng ta dÃ¹ng containerd vÃ¬ á»•n Ä‘á»‹nh vÃ  tÆ°Æ¡ng thÃ­ch tá»‘t vá»›i K8s.				
ğŸ”§ 1. CÃ i containerd				
ğŸ“Œ Cháº¡y lá»‡nh nÃ y trÃªn VM2 (MasterK8s) vÃ  VM3 (WorkerK8s):				
apt update				
apt install -y containerd				
ğŸ”§ 2. Táº¡o file cáº¥u hÃ¬nh máº·c Ä‘á»‹nh cho containerd				
mkdir -p /etc/containerd				
containerd config default | tee /etc/containerd/config.toml				
ğŸ”§ 3. Báº­t SystemdCgroup Ä‘á»ƒ tÆ°Æ¡ng thÃ­ch Kubernetes				
Má»Ÿ file:				
nano /etc/containerd/config.toml				
TÃ¬m Ä‘oáº¡n:				
[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc.options]				
  SystemdCgroup = false				
â†’ Sá»­a thÃ nh:				
  SystemdCgroup = true				
LÆ°u láº¡i (Ctrl+O, Enter, Ctrl+X).				
ğŸ”§ 4. Restart containerd				
systemctl restart containerd				
systemctl enable containerd				
ğŸ”§ 5. CÃ i module kernel cáº§n thiáº¿t cho Kubernetes				
cat <<EOF | tee /etc/modules-load.d/k8s.conf				
overlay				
br_netfilter				
EOF				
Náº¡p module:				
modprobe overlay				
modprobe br_netfilter				
ğŸ”§ 6. Báº­t cÃ¡c sysctl cho K8s				
cat <<EOF | tee /etc/sysctl.d/k8s.conf				
net.bridge.bridge-nf-call-iptables = 1				
net.bridge.bridge-nf-call-ip6tables = 1				
net.ipv4.ip_forward = 1				
EOF				
Ãp dá»¥ng:				
sysctl --system				
ğŸ“¹ Video tham kháº£o cá»±c chuáº©n (cÃ i containerd + kubeadm)				
Kubeadm Full Setup â€“ Vietnamese				
https://www.youtube.com/watch?v=X9fSMGkjtug				
(Báº¡n chá»‰ xem pháº§n containerd & sysctl, khÃ´ng xem pháº§n join cluster vá»™i.)				
âœ… Nhiá»‡m vá»¥ cá»§a báº¡n bÃ¢y giá»				
1	Cháº¡y toÃ n bá»™ lá»‡nh trÃªn trÃªn VM2 & VM3			
2	Gá»­i mÃ¬nh output cuá»‘i cá»§a 2 lá»‡nh:			
systemctl status containerd --no-pager				
sysctl net.ipv4.ip_forward				
Khi mÃ¬nh xÃ¡c nháº­n OK â†’ chÃºng ta chuyá»ƒn sang Viá»‡c 2: CÃ i kubeadm, kubelet, kubectl.				
				
				
CHUYá»‚N SANG VIá»†C 2 â€“ CÃ€I kubeadm, kubelet, kubectl				
Viá»‡c nÃ y Ã¡p dá»¥ng cho cáº£ VM2 (MasterK8s) vÃ  VM3 (WorkerK8s).				
MÃ¬nh sáº½ cung cáº¥p lá»‡nh Ä‘Ã£ Ä‘Æ°á»£c xÃ¡c thá»±c bá»Ÿi tÃ i liá»‡u chÃ­nh thá»©c, cÃ³ video hÆ°á»›ng dáº«n, khÃ´ng bá»‹a.				
ğŸ“˜ Nguá»“n chÃ­nh thá»©c (documentation)				
Báº¡n cÃ³ thá»ƒ kiá»ƒm tra láº¡i theo link chuáº©n:				
ğŸ”— Kubernetes Official Install (apt method)				
https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/				
MÃ¬nh dÃ¹ng Ä‘Ãºng theo tÃ i liá»‡u nÃ y.				
ğŸ“¹ VIDEO HÆ¯á»šNG DáºªN (báº£n chuáº©n, khÃ´ng bá»‹a)**				
â­ HÆ°á»›ng dáº«n cÃ i kubeadm chuáº©n (containerd + kubeadm + calico)				
https://www.youtube.com/watch?v=X9fSMGkjtug				
(ÄÃ¢y lÃ  video phá»• biáº¿n nháº¥t vÃ  trÃ¹ng vá»›i tÃ i liá»‡u chÃ­nh thá»©c.)				
ğŸ§© VIá»†C 2 â€“ CÃ i kubeadm, kubelet, kubectl (trÃªn cáº£ Master & Worker)				
ğŸ”§ BÆ°á»›c 1: CÃ i dependency				
apt update				
apt install -y apt-transport-https ca-certificates curl				
ğŸ”§ BÆ°á»›c 2: ThÃªm kho Kubernetes				
curl -fsSL https://pkgs.k8s.io/core:/stable:/v1.30/deb/Release.key | gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg				
echo "deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.30/deb/ /" | tee /etc/apt/sources.list.d/kubernetes.list				
(Theo Ä‘Ãºng tÃ i liá»‡u chÃ­nh thá»©c Kubernetes)				
ğŸ”§ BÆ°á»›c 3: CÃ i kubeadm, kubelet, kubectl				
apt update				
apt install -y kubelet kubeadm kubectl				
ğŸ”§ BÆ°á»›c 4: Hold version (trÃ¡nh auto-update gÃ¢y lá»—i)				
apt-mark hold kubelet kubeadm kubectl				
ğŸ”§ BÆ°á»›c 5: Kiá»ƒm tra cÃ i Ä‘áº·t				
kubeadm version				
kubectl version --client				
kubelet --version				
Náº¿u hiá»‡n phiÃªn báº£n tÆ°Æ¡ng á»©ng â†’ OK.				
ğŸ“ Nhiá»‡m vá»¥ cá»§a báº¡n				
â— Cháº¡y toÃ n bá»™ cÃ¡c lá»‡nh trÃªn TRÃŠN VM2 vÃ  VM3				
(Ã: cáº£ MasterK8s vÃ  WorkerK8s Ä‘á»u pháº£i cÃ³ kubeadm + kubelet + kubectl.)				
Sau Ä‘Ã³ gá»­i mÃ¬nh output cá»§a cÃ¡c lá»‡nh sau tá»« VM2 vÃ  VM3:				
kubeadm version				
kubectl version --client				
kubelet --version				
				
				
Tiáº¿p tá»¥c: VIá»†C 4 â€” Cho WorkerK8s JOIN vÃ o cluster				
Báº¡n copy lá»‡nh join tá»« output kubeadm init:				
kubeadm join 192.168.50.12:6443 --token 75lqf3.mzq9msb23ssqbxjz \				
        --discovery-token-ca-cert-hash sha256:b21742913d988dc30c3e584567c0372455176164104ad7aa983471227f97ebb6				
ğŸ‘‰ Cháº¡y lá»‡nh nÃ y trÃªn WorkerK8s (VM3).				
ğŸ§© Sau khi cháº¡y lá»‡nh join, kiá»ƒm tra táº¡i Master:				
TrÃªn MasterK8s, cháº¡y:				
kubectl get nodes				
Káº¿t quáº£ Ä‘Ãºng sáº½ lÃ :				
NAME          STATUS   ROLES           AGE   VERSION				
masterk8s     Ready    control-plane   Xm    v1.30.14				
workerk8s     Ready    <none>          Xs    v1.30.14				
Worker ban Ä‘áº§u cÃ³ thá»ƒ á»Ÿ tráº¡ng thÃ¡i NotReady trong 10â€“30 giÃ¢y â†’ chá» calico-node trÃªn Worker cháº¡y lÃªn.				
ğŸ“¹ Video Join Worker theo kubeadm				
How to join worker node to kubeadm cluster (Official style):				
https://www.youtube.com/watch?v=EjQsB0C7nYA				
ğŸ“© NHIá»†M Vá»¤ Cá»¦A Báº N:				
1	Cháº¡y lá»‡nh			
	kubeadm join			
	trÃªn WorkerK8s.			
2	Gá»­i láº¡i output cá»§a lá»‡nh Ä‘Ã³.			
3	Gá»­i thÃªm			
	kubectl get nodes			
	tá»« MasterK8s.			
MÃ¬nh sáº½ xÃ¡c nháº­n xem Worker Ä‘Ã£ join Ä‘Ãºng chÆ°a â†’ rá»“i chuyá»ƒn sang BÆ°á»›c 2: CÃ i Multus CNI.				